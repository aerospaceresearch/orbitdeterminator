

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorials &mdash; Orbit Determinator 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Modules documentation" href="modules.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Orbit Determinator
          

          
            
            <img src="_static/icon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                v1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#run-the-program-with-main-py">* Run the program with main.py</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#process">Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#run-the-program-with-automated-py">* Run the program with automated.py</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-certain-modules">* Using certain modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Process</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Orbit Determinator</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<div class="section" id="run-the-program-with-main-py">
<h2>* Run the program with main.py<a class="headerlink" href="#run-the-program-with-main-py" title="Permalink to this headline">¶</a></h2>
<p>For the first example we will showcase how you can use the full features of the package
with main.py. Simply executing the main.py by giving the name of .csv file that contains
the positional data of the satellite, as an argument in the function process(data_file):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">data_file</span><span class="p">,</span> <span class="n">error_apriori</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Given a .csv data file in the format of (time, x, y, z) applies both filters, generates a filtered.csv data</span>
<span class="sd">    file, prints out the final keplerian elements computed from both Lamberts and Interpolation and finally plots</span>
<span class="sd">    the initial, filtered data set and the final orbit.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_file (string): The name of the .csv file containing the positional data</span>
<span class="sd">        error_apriori (float): apriori estimation of the measurements error in km</span>

<span class="sd">    Returns:</span>
<span class="sd">        Runs the whole process of the program</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<p>Simply input the name of the .csv file in the format of (time, x, y, z) and <strong>tab delimiter</strong> like the orbit.csv that is
located in the src folder and the process will run. You also need to input a apriori estimation of the measurements
errors, which in the example case is 20km per point (points every 1 second). In the case you are using your own
positional data set you need to estimate this value and input it because it is critical for the filtering process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">process</span><span class="p">(</span><span class="s2">&quot;orbit.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the format of you data is (time, azimuth, elevation, distance) you can use the input_transf function first and be sure that the delimiter for the data file is tab delimiter since this is the one read_data supports.</p>
</div>
<p>The process that will run with the use of the process function is, first the program reads your data from the .csv file
then, applies both filters (Triple moving average and Savintzky - Golay), generates a .csv file called filtered, that included the filtered data set,
computes the keplerian elements of the orbit with both methods (Lamberts - Kalman and Spline Interpolation) and finally prints and plots some results.
More specifically, the results printed by this process will be first the sum and mean value of the residuals
(difference between filtered and initial data), the computed keplerian elements in format of (a - semi major axis,
e - eccentricity, i - inclination, ω - argument of perigee, Ω - right ascension of the ascending node,
v - true anomaly) and a 3d matplotlib graph that plots the initial, filtered data set and the final computed orbit
described by the keplerian elements (via the interpolation method).</p>
<div class="section" id="process">
<h3>Process<a class="headerlink" href="#process" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Reads the data</li>
<li>Uses both filters on them (Triple moving average and Savintzky - Golay )</li>
<li>Generates a .csv file called filtered that includes the filtered data set</li>
<li>Computes keplerian elements with both methods (Lamberts - Kalman and Spline Interpolation)</li>
<li>Prints results and plot a 3d matplotlib graph</li>
</ul>
</div>
<div class="section" id="results">
<h3>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Sum and mean of the residuals (differences between filtered and initial data set)</li>
<li>Final keplerian elements from both methods (first column : Lamberts - Kalman, second column : Spline Interpolation)</li>
<li>3d matplotlib graph with the initial, filtered data set and the final orbit described by the keplerian elements from Spline Interpolation</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Measurement unit for distance is kilometer and for angle degrees</p>
</div>
<p>The output should look like the following image.</p>
<div class="figure">
<img alt="_images/results.jpg" src="_images/results.jpg" />
</div>
</div>
</div>
<div class="section" id="run-the-program-with-automated-py">
<h2>* Run the program with automated.py<a class="headerlink" href="#run-the-program-with-automated-py" title="Permalink to this headline">¶</a></h2>
<p><cite>automated.py</cite> is another flavour of main.py that is supposed to run on a server. It keeps listening for new files in a particular directory and processes them when they arrive.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All the processing invloved in this module is identical to that of main.py.</p>
</div>
<p>For testing purpose some files have already put in a folder named src. These are raw unprocessed files. There is another folder named dst which contains processed files along with a graph saved in the form of svg.</p>
<p>To execute this script, change the directory to the script’s directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">orbitdeterminator</span><span class="o">/</span>
</pre></div>
</div>
<p>and run the code using python3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">automated</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>and thats it. This will keep listening for new files and process them as they arrive.</p>
<div class="figure">
<img alt="_images/automated_console.jpg" src="_images/automated_console.jpg" />
</div>
<div class="figure">
<img alt="_images/automated_graph.svg" src="_images/automated_graph.svg" /></div>
<div class="section" id="id1">
<h3>Process<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Initialize an empty git repository in src folder</li>
<li>Read the untracked files of that folder and put them in a list</li>
<li>Process the files in this list and save the results(processed data and graph) to dst folder</li>
<li>Stage the processed file in the src folder in order to avoid processing the same files multiple times.</li>
<li>Check for any untracked files in src and apply steps 2-4 again.</li>
</ul>
</div>
</div>
<div class="section" id="using-certain-modules">
<h2>* Using certain modules<a class="headerlink" href="#using-certain-modules" title="Permalink to this headline">¶</a></h2>
<p>In this example we are not going to use the main.py, but some of the main modules provided. First of all lets clear the
path we are going to follow which is fairly straightforward. Note that we are going to use the same orbit.csv that is
located inside the src folder and has <strong>tab delimeter</strong> (read_data.py reads with this delimiter).</p>
<div class="section" id="id2">
<h3>Process<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Read the data</li>
<li>Filter the data</li>
<li>Compute keplerian elements for the final orbit</li>
</ul>
<p>So first we read the data using the util/read_data.load_data function. Just input the .csv file name into the
function and it will create a numpy array with the positional data ready to be processed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">read_data</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;orbit.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the format of you data is (time, azimuth, elevation, distance) you can use the util/input_transf.spher_to_cart
function first. And it is critical for the x, y, z to be in kilometers.</p>
</div>
<p>We continue by applying the Triple moving average filter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_after_filter</span> <span class="o">=</span> <span class="n">triple_moving_average</span><span class="o">.</span><span class="n">generate_filtered_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>We suggest using 3 as the window size of the filter. Came to this conclusion after a lot of testing. Next we apply
the second filter to the data set which will be of a larger window size so that we can smooth the data set in
a larger scale. The optimal window size for the Savintzky - Golay filter is being computed by the function
golay_window.c(error_apriori) in which we only have to input the apriori error estimation for the initial data set
(or the measurements error):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">error_apriori</span> <span class="o">=</span> <span class="mf">20.0</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">golay_window</span><span class="o">.</span><span class="n">c</span><span class="p">(</span><span class="n">error_apriori</span><span class="p">)</span>

<span class="n">window</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span>
<span class="n">window</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</pre></div>
</div>
<p>The other 2 lines after the use of the golay_window.c(error_apriori) are needed to compute the window size for the
Savintzky - Golay filter and again for the polynomial parameter of the filter we suggest using 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_after_filter</span> <span class="o">=</span> <span class="n">sav_golay</span><span class="o">.</span><span class="n">golay</span><span class="p">(</span><span class="n">data_after_filter</span><span class="p">,</span> <span class="n">window</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>At this point we have the filtered positional data set ready to be inputed into the
Lamberts - Kalman and Spline interpolation algorithms so that the final keplerian elements can be computed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kep_lamb</span> <span class="o">=</span> <span class="n">lamberts_kalman</span><span class="o">.</span><span class="n">create_kep</span><span class="p">(</span><span class="n">data_after_filter</span><span class="p">)</span>
<span class="n">kep_final_lamb</span> <span class="o">=</span> <span class="n">lamberts_kalman</span><span class="o">.</span><span class="n">kalman</span><span class="p">(</span><span class="n">kep_lamb</span><span class="p">,</span> <span class="mf">0.01</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">kep_inter</span> <span class="o">=</span> <span class="n">interpolation</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">data_after_filter</span><span class="p">)</span>
<span class="n">kep_final_inter</span> <span class="o">=</span> <span class="n">lamberts_kalman</span><span class="o">.</span><span class="n">kalman</span><span class="p">(</span><span class="n">kep_inter</span><span class="p">,</span> <span class="mf">0.01</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>With the above 4 lines of code the final set of 6 keplerian elements is computed by the two methods.
The output format is (semi major axis (a), eccentricity (e), inclination (i), argument of perigee (ω),
right ascension of the ascending node (Ω), true anomaly (v)). So finally, in the variables kep_final_lamb and
kep_final_inter a numpy array 1x6 has the final computed keplerian elements.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the orbit you want to compute is polar (i = 90) then we suggest you to use only the interpolation method.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="modules.html" class="btn btn-neutral" title="Modules documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Nilesh Chaturvedi, Alexandros Kazantzidis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>